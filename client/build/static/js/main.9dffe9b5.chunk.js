(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{60:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a,c,r,s=n(2),o=n.n(s),i=n(47),l=n.n(i),d=(n(60),n(16)),u=n(4),j=function(){return Object(u.jsxs)("main",{children:[Object(u.jsx)("div",{className:"col-6",children:"This page is now being loaded properly, your welcome"}),Object(u.jsx)("div",{className:"col-6 p-3",children:"This is a bootstrap test"})]})},b=n(24),m=n(30),h=n(22),p=n(10),O=n(23),x=n(78),g=n(35),v=n(76),f=Object(v.a)(a||(a=Object(g.a)(["\n    mutation login ($username: String!, $password: String!){\n        login(username: $username, password: $password){\n            token\n            user {\n                _id\n                username\n            }\n        }\n    }\n"]))),w=Object(v.a)(c||(c=Object(g.a)(["\n    mutation addUser($username: String!, $password: String!) {\n        addUser(username: $username, password: $password){\n            token\n            user {\n                _id\n                username\n            }\n        }\n    }\n"]))),k=(Object(v.a)(r||(r=Object(g.a)(["\n    mutation addTodo($todoText: String!, $todoAuthor: String!){\n        addTodo(todoText: $todoText, todoAuthor: $todoAuthor){\n            _id\n            todoText\n            todoAuthor\n            createdAt\n        }\n    }\n"]))),n(48)),y=n(49),N=n(38),S=new(function(){function e(){Object(k.a)(this,e)}return Object(y.a)(e,[{key:"getProfile",value:function(){return Object(N.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(N.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.reload()}}]),e}()),T=function(e){var t=Object(s.useState)({username:"",password:""}),n=Object(p.a)(t,2),a=n[0],c=n[1],r=Object(x.a)(f),o=Object(p.a)(r,2),i=o[0],l=o[1],j=l.error,g=l.data,v=function(e){var t=e.target,n=t.name,r=t.value;c(Object(d.a)(Object(d.a)({},a),{},Object(h.a)({},n,r)))},w=function(){var e=Object(m.a)(Object(b.a)().mark((function e(t){var n,r;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(a),e.prev=2,e.next=5,i({variables:Object(d.a)({},a)});case 5:n=e.sent,r=n.data,S.login(r.login.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:c({username:"",password:""});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(u.jsx)("div",{className:"col-12 col-lg-10",children:Object(u.jsxs)("div",{className:"card",children:[Object(u.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Login"}),Object(u.jsxs)("div",{className:"card-body",children:[g?Object(u.jsxs)("p",{children:["Success! You may now head"," ",Object(u.jsx)(O.b,{to:"/todo",children:"back to the homepage."})]}):Object(u.jsxs)("form",{onSubmit:w,children:[Object(u.jsx)("input",{className:"form-input",placeholder:"Your username",name:"username",type:"username",value:a.username,onChange:v}),Object(u.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:a.password,onChange:v}),Object(u.jsx)("button",{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),j&&Object(u.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:j.message})]})]})})})},$=function(){var e=Object(s.useState)({username:"",password:""}),t=Object(p.a)(e,2),n=t[0],a=t[1],c=Object(x.a)(w),r=Object(p.a)(c,2),o=r[0],i=r[1],l=i.error,j=i.data,g=function(e){var t=e.target,c=t.name,r=t.value;a(Object(d.a)(Object(d.a)({},n),{},Object(h.a)({},c,r)))},v=function(){var e=Object(m.a)(Object(b.a)().mark((function e(t){var a,c;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n),e.prev=2,e.next=5,o({variables:Object(d.a)({},n)});case 5:a=e.sent,c=a.data,S.login(c.addUser.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(u.jsx)("div",{className:"col-12 col-lg-10",children:Object(u.jsxs)("div",{className:"card",children:[Object(u.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Sign Up"}),Object(u.jsxs)("div",{className:"card-body",children:[j?Object(u.jsxs)("p",{children:["Success! You may now head"," ",Object(u.jsx)(O.b,{to:"/todo",children:"back to the homepage."})]}):Object(u.jsxs)("form",{onSubmit:v,children:[Object(u.jsx)("input",{className:"form-input",placeholder:"Your username",name:"username",type:"text",value:n.name,onChange:g}),Object(u.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:n.password,onChange:g}),Object(u.jsx)("button",{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),l&&Object(u.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:l.message})]})]})})})},I=function(){return Object(u.jsx)("main",{children:Object(u.jsx)("div",{className:"p-3",children:" You are on Todo"})})},_=n(51),C=n(5),A=n(53),Y=n(75),D=n(77),F=n(74),U=(n(63),Object(A.a)({uri:"/graphql"})),B=Object(_.a)((function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(d.a)(Object(d.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),E=new Y.a({link:B.concat(U),cache:new D.a});var L=function(){return Object(u.jsx)(F.a,{client:E,children:Object(u.jsx)(O.a,{children:Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)(C.c,{children:[Object(u.jsx)(C.a,{path:"/",element:Object(u.jsx)(j,{})}),Object(u.jsx)(C.a,{path:"/login",element:Object(u.jsx)(T,{})}),Object(u.jsx)(C.a,{path:"/signup",element:Object(u.jsx)($,{})}),Object(u.jsx)(C.a,{path:"/todo",element:Object(u.jsx)(I,{})})]})})})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,80)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};l.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(L,{})}),document.getElementById("root")),P()}},[[64,1,2]]]);
//# sourceMappingURL=main.9dffe9b5.chunk.js.map